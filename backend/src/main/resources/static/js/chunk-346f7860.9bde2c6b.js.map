{"version":3,"sources":["webpack:///./src/api/book.js","webpack:///./src/views/Subscribe.vue","webpack:///./src/views/Subscribe.vue?0794","webpack:///./src/api/order.js"],"names":["list","current","page","request","url","method","params","size","all","add","form","data","detail","id","update","del","headers","localStorage","getItem","query","header","title","content","$router","back","class","model","formRef","label-width","label","bookId","filterable","placeholder","findMax","books","item","key","bookName","value","count","min","getSum","max","sum","disabled","agent","style","type","order","name","created","then","res","this","$store","getters","getUser","username","book","setup","bookname","props","methods","bookPrice","inventory","confirm","confirmButtonText","cancelButtonText","push","__exports__","render","deleteAll","arr"],"mappings":"0XAOO,SAASA,EAAKC,EAAQC,GACzB,OAAOC,eAAQ,CACXC,IAAK,aACLC,OAAQ,MACRC,OAAQ,CACJL,QAAQA,EACRM,KAAKL,KAKV,SAASM,IACZ,OAAOL,eAAQ,CACXC,IAAK,YACLC,OAAQ,QAIT,SAASI,EAAIC,GAChB,OAAOP,eAAQ,CACXE,OAAQ,OACRD,IAAK,YACLO,KAAM,kBACCD,KAIR,SAASE,EAAOC,GACnB,OAAOV,eAAQ,CACXE,OAAQ,MACRD,IAAK,eACLE,OAAQ,CACNO,QAoBH,SAASC,EAAOJ,GAEnB,OAAOP,eAAQ,CACXE,OAAQ,OACRD,IAAK,eACLO,KAAM,kBACCD,KAIR,SAASK,EAAIF,GAChB,OAAOV,eAAQ,CACXE,OAAQ,MACRD,IAAK,eACLY,QAAS,CACL,cAAiBC,aAAaC,QAAQ,UAE1CZ,OAAQ,CACJO,QAmBL,SAASM,EAAMT,GAClB,OAAOP,eAAQ,CACXE,OAAQ,OACRD,IAAK,cACLY,QAAS,CACL,cAAiBC,aAAaC,QAAQ,UAE1CP,KAAM,kBACCD,O,wFC9DoC,M,ieAzCjD,gCA6CM,YA5CJ,yBA2CU,QA1CGU,OAAM,sBACf,iBAKE,CALF,yBAKE,GAJAC,MAAM,KACNC,QAAQ,OACP,OAAI,iCAAOC,QAAQC,SACpBC,MAAM,mB,8BAGV,iBAiCU,CAjCV,yBAiCU,GAjCAC,MAAO,EAAAC,QAASC,cAAY,S,+BACpC,iBAcgB,CAdhB,yBAcgB,GAdFC,MAAM,QAAM,C,8BACxB,iBAaD,CAbC,yBAaD,G,WAZY,EAAAF,QAAQG,O,qDAAR,EAAAH,QAAQG,OAAM,IACvBC,WAAA,GACAC,YAAY,UACX,SAAQ,EAAAC,S,+BAGP,iBAAqB,E,2BADvB,gCAMY,2CALK,EAAAC,OAAK,SAAbC,G,gCADT,yBAMY,GAJTC,IAAKD,EAAKtB,GACVgB,MAAOM,EAAKE,SACZC,MAAOH,EAAKtB,I,mFAInB,yBAEe,GAFDgB,MAAM,QAAM,C,8BACxB,iBAAgF,CAAhF,yBAAgF,G,WAAtD,EAAAF,QAAQY,M,qDAAR,EAAAZ,QAAQY,MAAK,IAAGC,IAAK,EAAI,SAAQ,EAAAC,OAASC,IAAK,EAAAA,K,kDAE3E,yBAEe,GAFDb,MAAM,MAAI,C,8BACtB,iBAA0D,CAA1D,yBAA0D,G,WAAhC,EAAAF,QAAQgB,I,qDAAR,EAAAhB,QAAQgB,IAAG,IAAGC,UAAU,G,iCAEpD,yBAOe,GAPDf,MAAM,OAAK,C,8BACvB,iBAKE,CALF,yBAKE,G,WAJS,EAAAF,QAAQkB,M,qDAAR,EAAAlB,QAAQkB,MAAK,IACtBD,SAAA,GACAZ,YAAY,MACZc,MAAA,e,iCAGJ,yBAEe,GAFDjB,MAAM,QAAM,C,8BACxB,iBAAuD,CAAvD,yBAAuD,GAA5CkB,KAAK,UAAW,QAAO,EAAAC,O,+BAAO,iBAAE,C,8GAYtC,GACbC,KAAM,YACNC,QAFa,WAEH,aACR,iBAAMC,MAAK,SAACC,GACV,EAAKlB,MAAQkB,EAAIzC,KAAKA,QAExB0C,KAAK1B,QAAQkB,MAAb,UAAqBQ,KAAKC,OAAOC,QAAQC,eAAzC,aAAqB,EAA6BC,UAEpD9C,KARa,WASX,MAAO,CACL+B,IAAK,IACLG,MAAO,GACPa,KAAM,KAGVC,MAfa,WAgBX,IAAMzB,EAAQ,iBAAI,IACZP,EAAU,iBAAI,CAClBG,OAAQ,GACR8B,SAAU,GACVf,MAAO,GACPF,IAAK,GACLJ,MAAO,IAGT,MAAO,CACLL,QACAP,YAGJkC,MAAO,GACPC,QAAS,CACPrB,OADO,WAELY,KAAK1B,QAAQgB,IAAMU,KAAKK,KAAKK,UAAYV,KAAK1B,QAAQY,OAExDN,QAJO,SAICpB,GAAI,WAEV,eAAOA,GAAIsC,MAAK,SAACC,GACf,IAAMzC,EAAOyC,EAAIzC,KAAKA,KACtB,EAAK+C,KAAO/C,EACZ,EAAKgB,QAAQiC,SAAWjD,EAAK0B,SAC7B,EAAKK,IAAMU,EAAIzC,KAAKA,KAAKqD,cAG7BhB,MAbO,WAaC,WACN,eAAIK,KAAK1B,SAASwB,MAAK,SAACC,GACtB,OAAaa,QAAQ,yBAA0B,KAAM,CACnDC,kBAAmB,UACnBC,iBAAkB,WACjBhB,MAAK,WACN,EAAK5B,QAAQ6C,KAAK,CAAEnB,KAAM,mB,qBCnGpC,MAAMoB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,wOCAR,SAAStE,EAAKC,EAAQC,GACzB,OAAOC,eAAQ,CACXC,IAAK,cACLC,OAAQ,MACRC,OAAQ,CACJL,QAAQA,EACRM,KAAKL,KAIV,SAASO,EAAIC,GAChB,OAAOP,eAAQ,CACXE,OAAQ,OACRD,IAAK,aACLO,KAAM,kBACCD,KA8BR,SAASK,EAAIF,GAChB,OAAOV,eAAQ,CACXE,OAAQ,MACRD,IAAK,gBACLY,QAAS,CACL,cAAiBC,aAAaC,QAAQ,UAE1CZ,OAAQ,CACJO,QAIL,SAAS0D,EAAUC,GACtB,OAAOrE,eAAQ,CACXE,OAAQ,OACRD,IAAK,mBACLY,QAAS,CACL,cAAiBC,aAAaC,QAAQ,UAE1CP,KAAM6D,IAQP,SAASrD,EAAMT,GAClB,OAAOP,eAAQ,CACXE,OAAQ,OACRD,IAAK,eACLY,QAAS,CACL,cAAiBC,aAAaC,QAAQ,UAE1CP,KAAM,kBACCD","file":"js/chunk-346f7860.9bde2c6b.js","sourcesContent":["import request from '../utils/request';\r\n/**\r\n * \r\n * @param {当前页数} current \r\n * @param {*} page 页面大小\r\n * @returns 分页数据\r\n */\r\nexport function list(current,page) {\r\n    return request({\r\n        url: '/book/list',\r\n        method: \"get\",\r\n        params: {\r\n            current:current,\r\n            size:page\r\n        }\r\n    })\r\n}\r\n\r\nexport function all() {\r\n    return request({\r\n        url: '/book/all',\r\n        method: \"get\",\r\n       \r\n    })\r\n}\r\nexport function add(form) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/book/add\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\nexport function detail(id) {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/book/detail\",\r\n        params: {\r\n          id\r\n        }\r\n    })\r\n}\r\n// /**\r\n//  * \r\n//  * @param {当前页数} current \r\n//  * @param {*} page 页面大小\r\n//  * @returns 分页数据\r\n//  */\r\n// export function page(current, page) {\r\n//     return   request({\r\n//           url: '/book/page',\r\n//           method: 'get',\r\n//           params: {\r\n//               current:current,\r\n//               size:page\r\n//           }\r\n//       })\r\n//   }\r\nexport function update(form) {\r\n    //需要id\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/book/update\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\nexport function del(id) {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/book/delete\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        params: {\r\n            id\r\n        }\r\n    })\r\n}\r\nexport function deleteAll(arr) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/book/deleteAll\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        data: arr\r\n    })\r\n}\r\n/**\r\n * 需要bookName与isbn\r\n * @param {*} form \r\n * @returns \r\n */\r\nexport function query(form) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/book/query\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}","<template>\n  <div>\n    <el-card>\n      <template #header>\n        <el-page-header\n          title=\"返回\"\n          content=\"教材订购\"\n          @back=\"this.$router.back()\"\n          class=\"pageHeader\"\n        />\n      </template>\n      <el-form :model=\"formRef\" label-width=\"120px\">\n        <el-form-item label=\"教材名称\">\n          <el-select\n            v-model=\"formRef.bookId\"\n            filterable\n            placeholder=\"输入/选择教材\"\n            @change=\"findMax\"\n          >\n            <el-option\n              v-for=\"item in books\"\n              :key=\"item.id\"\n              :label=\"item.bookName\"\n              :value=\"item.id\"\n            >\n            </el-option> </el-select\n        ></el-form-item>\n        <el-form-item label=\"教材数量\">\n          <el-input-number v-model=\"formRef.count\" :min=\"1\" @change=\"getSum\" :max=\"max\" />\n        </el-form-item>\n        <el-form-item label=\"总价\">\n          <el-input-number v-model=\"formRef.sum\" :disabled=\"true\" />\n        </el-form-item>\n        <el-form-item label=\"订购人\">\n          <el-input\n            v-model=\"formRef.agent\"\n            disabled\n            placeholder=\"订购人\"\n            style=\"width: 20%\"\n          />\n        </el-form-item>\n        <el-form-item label=\"发起订购\">\n          <el-button type=\"primary\" @click=\"order\">订购</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { detail, all } from \"../api/book\";\nimport { ref } from \"vue\";\nimport { add } from \"../api/order.js\";\nimport { ElMessageBox } from \"element-plus\";\nexport default {\n  name: \"Subscribe\",\n  created() {\n    all().then((res) => {\n      this.books = res.data.data;\n    });\n    this.formRef.agent = this.$store.getters.getUser?.username;\n  },\n  data() {\n    return {\n      max: 100,\n      agent: \"\",\n      book: \"\",\n    };\n  },\n  setup() {\n    const books = ref([]);\n    const formRef = ref({\n      bookId: \"\",\n      bookname: \"\",\n      agent: \"\",\n      sum: \"\",\n      count: 0,\n    });\n\n    return {\n      books,\n      formRef,\n    };\n  },\n  props: {},\n  methods: {\n    getSum() {\n      this.formRef.sum = this.book.bookPrice * this.formRef.count;\n    },\n    findMax(id) {\n      //最大提交订单数\n      detail(id).then((res) => {\n        const data = res.data.data;\n        this.book = data;\n        this.formRef.bookname = data.bookName;\n        this.max = res.data.data.inventory;\n      });\n    },\n    order() {\n      add(this.formRef).then((res) => {\n        ElMessageBox.confirm(\"教材采购订单登记成功！跳转还是留在当前页面？\", \"回应\", {\n          confirmButtonText: \"跳转至订单页面\",\n          cancelButtonText: \"留在当前页面\",\n        }).then(() => {\n          this.$router.push({ name: \"Order\" });\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { render } from \"./Subscribe.vue?vue&type=template&id=6c92041c\"\nimport script from \"./Subscribe.vue?vue&type=script&lang=js\"\nexport * from \"./Subscribe.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\vueProjects\\\\library\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import request from '../utils/request';\r\n/**\r\n * \r\n * @param {当前页数} current \r\n * @param {*} page 页面大小\r\n * @returns 分页数据\r\n */\r\nexport function list(current,page) {\r\n    return request({\r\n        url: '/order/list',\r\n        method: \"get\",\r\n        params: {\r\n            current:current,\r\n            size:page\r\n        }\r\n    })\r\n}\r\nexport function add(form) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/order/add\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\n// /**\r\n//  * \r\n//  * @param {当前页数} current \r\n//  * @param {*} page 页面大小\r\n//  * @returns 分页数据\r\n//  */\r\n// export function page(current, page) {\r\n//     return   request({\r\n//           url: '/order/page',\r\n//           method: 'get',\r\n//           params: {\r\n//               current:current,\r\n//               size:page\r\n//           }\r\n//       })\r\n//   }\r\nexport function update(form) {\r\n    //需要id\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/order/update\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\nexport function del(id) {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/order/delete\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        params: {\r\n            id\r\n        }\r\n    })\r\n}\r\nexport function deleteAll(arr) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/order/deleteAll\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        data: arr\r\n    })\r\n}\r\n/**\r\n * 需要bookname与agent\r\n * @param {*} form \r\n * @returns \r\n */\r\nexport function query(form) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/order/query\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}"],"sourceRoot":""}