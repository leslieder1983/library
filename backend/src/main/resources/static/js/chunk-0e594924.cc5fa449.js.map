{"version":3,"sources":["webpack:///./src/views/Category.vue?3f1d","webpack:///./src/views/Category.vue","webpack:///./src/views/Category.vue?8ad3","webpack:///./src/api/category.js"],"names":["class","title","content","$router","back","style","span","type","add","confirm-button-text","cancel-button-text","icon-color","deleteAll","reference","ref","data","detail","stripe","border","selectChange","property","label","align","width","default","handleEdit","scope","$index","handleDelete","row","id","gutter","background","layout","total","currentPage","page-size","pageSize","handleChange","dialogFormVisible","editIndex","dialog","footer","dialogConfirm","model","label-width","required","classes","placeholder","name","created","this","deleteMap","setup","formInline","multipleTableRef","methods","index","JSON","parse","stringify","handleClose","then","res","message","catch","e","console","log","clearAll","ids","forEach","element","push","$refs","clearSelection","current","size","records","err","__exports__","render","list","page","request","url","method","params","form","all","update","del","headers","localStorage","getItem","arr"],"mappings":"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","file":"js/chunk-0e594924.cc5fa449.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Category.vue?vue&type=style&index=0&id=6c05acda&lang=scss&scoped=true\"","<template>\n  <div>\n    <el-page-header\n      title=\"返回\"\n      content=\"教材分类管理\"\n      @back=\"this.$router.back()\"\n      class=\"pageHeader\"\n    />\n    <el-divider></el-divider>\n    <el-row style=\"margin-bottom: 10px\">\n      <el-col :span=\"8\"\n        ><el-button type=\"primary\" @click=\"add\"\n          >新增\n          <el-icon><plus /></el-icon>\n        </el-button>\n        <el-popconfirm\n          confirm-button-text=\"是的\"\n          cancel-button-text=\"不\"\n          icon-color=\"red\"\n          title=\"确定删除所有选中数据?\"\n          @confirm=\"deleteAll\"\n        >\n          <template #reference>\n            <el-button type=\"danger\"\n              >删除选中<el-icon><delete /></el-icon\n            ></el-button>\n          </template>\n        </el-popconfirm>\n      </el-col>\n    </el-row>\n    <el-divider></el-divider>\n    <!-- 表格数据-->\n    <el-table\n      ref=\"multipleTableRef\"\n      :data=\"detail\"\n      style=\"width: 100%; text-align: center\"\n      stripe\n      border\n      @selection-change=\"selectChange\"\n    >\n      <el-table-column type=\"selection\" />\n      <el-table-column property=\"classes\" label=\"教材分类名称\" align=\"center\">\n      </el-table-column>\n\n      <el-table-column label=\"操作\" width=\"180\">\n        <template #default=\"scope\">\n          <el-button @click=\"handleEdit(scope.$index, scope)\" type=\"primary\"\n            >编辑</el-button\n          >\n          <el-popconfirm\n            confirm-button-text=\"是的\"\n            cancel-button-text=\"不\"\n            icon-color=\"red\"\n            title=\"确定删除当前教材分类数据?\"\n            @confirm=\"handleDelete(scope.row.id)\"\n          >\n            <template #reference>\n              <el-button type=\"danger\"\n                >删除<el-icon><delete /></el-icon\n              ></el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-divider></el-divider>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"4\"></el-col>\n      <el-col :span=\"16\" style=\"text-align: center\"\n        ><el-pagination\n          background\n          layout=\" total,prev,pager, next, jumper,->\"\n          :total=\"total\"\n          v-model:currentPage=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          @size-change=\"handleChange\"\n          @current-change=\"handleChange\"\n        >\n        </el-pagination\n      ></el-col>\n      <el-col :span=\"4\"></el-col>\n    </el-row>\n\n    <!-- 对话框-->\n    <el-dialog\n      v-model=\"dialogFormVisible\"\n      :title=\"editIndex !== '' ? '编辑信息' : '新增教材分类'\"\n      @close=\"dialog = {}\"\n    >\n      <el-form :model=\"dialog\" label-width=\"120px\">\n        <el-form-item label=\"教材类型名称\" required>\n          <el-input v-model=\"dialog.classes\" placeholder=\"教材类型名称\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"dialogConfirm\">\n            <span v-if=\"editIndex !== ''\">修改</span>\n            <span v-else>添加</span></el-button\n          >\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { list, update, add, del, deleteAll } from \"../api/category\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  name: \"detail\",\n  created() {\n    this.handleChange();\n  },\n  data() {\n    return {\n      dialog: {},\n      dialogFormVisible: false,\n      editIndex: \"\",\n      deleteMap: [],\n      currentPage: 1,\n      pageSize: 5,\n      total: 10,\n    };\n  },\n  setup() {\n    const detail = ref();\n\n    const formInline = ref({\n      classes: \"\",\n    });\n    const multipleTableRef = ref();\n    return {\n      formInline,\n      multipleTableRef,\n      detail,\n    };\n  },\n\n  methods: {\n    handleEdit(index, scope) {\n      this.editIndex = index;\n      this.dialog = JSON.parse(JSON.stringify(scope.row));\n      this.dialogFormVisible = true;\n    },\n    handleClose() {},\n\n    handleDelete(id) {\n      //删除单个数据\n      del(id)\n        .then((res) => {\n          ElMessage({\n            message: \"删除成功\",\n            type: \"success\",\n          });\n          this.handleChange();\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    //对话框，新增或者编辑\n    dialogConfirm() {\n      if (this.editIndex !== \"\") {\n        update(this.dialog)\n          .then(() => {\n            this.detail[this.editIndex] = JSON.parse(JSON.stringify(this.dialog));\n            this.editIndex = \"\";\n            this.dialogFormVisible = false;\n            ElMessage({\n              message: \"修改成功\",\n              type: \"success\",\n            });\n          })\n          .catch((e) => {\n            ElMessage({\n              message: \"修改失败！\" + e,\n              type: \"warning\",\n            });\n          });\n      } else {\n        //新增\n        add(this.dialog)\n          .then(() => {\n            this.handleChange();\n            this.editIndex = \"\";\n            this.dialogFormVisible = false;\n            ElMessage({\n              message: \"添加成功\",\n              type: \"success\",\n            });\n          })\n          .catch((e) => {\n            ElMessage({\n              message: \"添加失败！\" + e,\n              type: \"warning\",\n            });\n          });\n      }\n    },\n    add() {\n      this.dialogFormVisible = true;\n    },\n    clearAll() {\n      //清除所有查询\n      this.formInline.classes = \"\";\n      this.handleChange();\n    },\n    //删除所有选中\n    deleteAll() {\n      const ids = [];\n      this.deleteMap.forEach((element) => {\n        ids.push(element.id);\n      });\n      //删除所有\n      deleteAll(ids)\n        .then((res) => {\n          ElMessage({\n            message: \"删除成功\",\n            type: \"success\",\n          });\n          this.$refs.multipleTableRef.clearSelection();\n          this.handleChange();\n        })\n        .then((e) => {\n          console.log(e);\n        });\n    },\n    selectChange(row) {\n      this.deleteMap = row;\n    },\n    //分页处理\n    handleChange() {\n      list(this.currentPage, this.pageSize)\n        .then((res) => {\n          const data = res.data.data;\n          this.total = data.total;\n          this.currentPage = data.current;\n          this.pageSize = data.size;\n          this.detail = data.records;\n        })\n        .catch((err) => console.log(err));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.form-inline {\n  justify-content: flex-start;\n}\n.el-table {\n  text-align: center;\n}\n</style>\n","import { render } from \"./Category.vue?vue&type=template&id=6c05acda&scoped=true\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\n\nimport \"./Category.vue?vue&type=style&index=0&id=6c05acda&lang=scss&scoped=true\"\n\nimport exportComponent from \"G:\\\\vueProjects\\\\library\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c05acda\"]])\n\nexport default __exports__","import request from '../utils/request';\r\nexport function list(current, page) {\r\n    return request({\r\n        url: '/category/list',\r\n        method: \"get\",\r\n        params: {\r\n            current:current,\r\n            size:page\r\n        }\r\n    })\r\n}\r\nexport function add(form) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/category/add\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\n/**\r\n * \r\n * @returns all\r\n */\r\nexport function all() {\r\n    return   request({\r\n          url: '/category/all',\r\n          method: 'get',\r\n      })\r\n  }\r\nexport function update(form) {\r\n    //需要id\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/category/update\",\r\n        data: {\r\n            ...form\r\n        }\r\n    })\r\n}\r\nexport function del(id) {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/category/delete\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        params: {\r\n            id\r\n        }\r\n    })\r\n}\r\nexport function deleteAll(arr) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/category/deleteAll\",\r\n        headers: {\r\n            \"Authorization\": localStorage.getItem('token'),\r\n        },\r\n        data: arr\r\n    })\r\n}\r\n\r\n// export function query(form) {\r\n//     console.log('query',form);\r\n//     return request({\r\n//         method: \"post\",\r\n//         url: \"/category/query\",\r\n//         headers: {\r\n//             \"Authorization\": localStorage.getItem('token'),\r\n//         },\r\n//         data: {\r\n//             ...form\r\n//         }\r\n//     })\r\n// }"],"sourceRoot":""}